from django import template
from Pentestor.models import Report
from Project import settings
from pathlib import Path
from django.utils.safestring import mark_safe

register = template.Library()

@register.simple_tag()
def get_content_of_file(report: Report):
    with open(file=Path(str(report.data.file)), mode="r") as f:
        lines = f.readlines()
    return mark_safe(''.join([f"<p>{line[0:-1]}</p>" for line in lines if not (len(line) == 1)]))
